# Предварительный анализ задачи определения мошеннических финансовых операций (домашнее  задание 1)

## Цели проектируемой системы

### Необходимо реализовать **антифрод-систему**, которая будет удовлетворять следющим критериям:

- Решение должно сохранить компании **конкурентоспособность** (_-> бизнес-метрики_)
- Решение должно выдерживать пиковые нагрузки до **400 TPS** в определенные периоды
- Необходима **аренда инфраструктуры** для размещения решения
- Утечка **конфиденциальных** данных при эксплуатации решения **недопустима**, а конфиденциальные данные присутствуют

### Бизнес-метрики:

- Количество пропущенных мошеннических транзакций среди всех транзакций <= 2%. При этом общий ущерб клиентов за месяц не должен превышать 500000. руб.
     - Необходимо отслеживать оба показателя в процессе эксплуатации как минимум ежемесячно. Так же в процессе обучения моделей эту метрику легко оценить на исторических данных (применили мождель к тестовому набору за один месяц и оценили метрики). 
- Если система определит корректную транзакцию как мошенническую, эта транзакция будет отклонена, а пользователь будет недоволен. Если доля таких транзакций превысит 5 %, то начнется отток клиентов из компании.
     - Почти полностью пересекается с метрикой машинного обучения, аналогично можно оценить на исторических данных, и необходимо ежемесячно отслеживать.

### Реализация проекта должна удовлетворять следующим требованиям:

- **временные** ограничения (три месяца на MVP и полгода на завершение)
- **финансовые** ограничения (до 10 млн. руб. без учета зарплат)
- **безопасное** использование **конфиденциальных** данных компании (данные для обучения и т.д.)

## Метрики машинного обучения

Учтем два требования:

- Количество пропущенных мошеннических транзакций среди всех транзакций <= 2%. Общий ущерб клиентов за месяц не должен превышать 500000. руб.
- Если система определит корректную транзакцию как мошенническую, эта транзакция будет отклонена, а пользователь будет недоволен. Опыт бизнес-аналитиков подсказывает, что если доля таких транзакций превысит 5 %, то начнется отток клиентов из компании

Необходимо совместить эти требования в одной метрике либо использовать несколько метрик.

Предположим, что метка "**1**" - это ответ модели "транзакция мошенническая", метка "**0**" - "транзакция безопасная".

Тогда:
- TN = количество верно определенных мошеннических транзакций из всех транзакций
- FN = количество мошеннических транзакций, которые модель определила как безопасные
- FP = количество безопасных транзакций, которые модель определила как мошеннические
- TN = количество безопасных транзакций, верно определенных моделью

Для удовлетворения первого требования (первой его части) необходимо, чтобы $\frac{FN}{TN + FN + FP + TN} <= 0.02$.
Пусть $S_{FN_i}$ - сумма i-й FN-транзакции. Тогда для удовлетворения второй части первого требования необходимо, чтобы $\sum_{i = 1}^{FN} S_{FN_i}$ <= 500000 руб.

Для удовлетворения второго требования необходимо уменьшать долю FP, а для недопущения оттока клиентов необходимо следить, чтобы $\frac{FP}{TN + FN + FP + TN} <= 0.02$.

Совместить FP и FN можно, например, как error_rate = $\frac{FP + FN}{TN + FN + FP + TN}$.


## Особенности проекта (MISSION Canvas)

## Основные функциональные части



